{"numFailedTestSuites":3,"numFailedTests":13,"numPassedTestSuites":1,"numPassedTests":52,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":4,"numTotalTests":65,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1755659260536,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["LegacyCodeAnalyzer","Basic Analysis Flow"],"duration":23,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Basic Analysis Flow should analyze a single COBOL file","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should analyze a single COBOL file"},{"ancestorTitles":["LegacyCodeAnalyzer","Basic Analysis Flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Basic Analysis Flow should analyze multiple files","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should analyze multiple files"},{"ancestorTitles":["LegacyCodeAnalyzer","Basic Analysis Flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Basic Analysis Flow should handle multiple analysis types for a single file","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle multiple analysis types for a single file"},{"ancestorTitles":["LegacyCodeAnalyzer","Language Support"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Language Support should analyze COBOL files","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should analyze COBOL files"},{"ancestorTitles":["LegacyCodeAnalyzer","Language Support"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Language Support should analyze Java files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should analyze Java files"},{"ancestorTitles":["LegacyCodeAnalyzer","Language Support"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Language Support should analyze SQL files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should analyze SQL files"},{"ancestorTitles":["LegacyCodeAnalyzer","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Error Handling should handle empty file list gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle empty file list gracefully"},{"ancestorTitles":["LegacyCodeAnalyzer","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Error Handling should handle files with empty content","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle files with empty content"},{"ancestorTitles":["LegacyCodeAnalyzer","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Error Handling should handle large files","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle large files"},{"ancestorTitles":["LegacyCodeAnalyzer","Analysis Options"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Analysis Options should respect custom analysis options","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should respect custom analysis options"},{"ancestorTitles":["LegacyCodeAnalyzer","Analysis Options"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Analysis Options should handle missing options gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing options gracefully"},{"ancestorTitles":["LegacyCodeAnalyzer","Result Structure"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Result Structure should return properly structured results","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should return properly structured results"},{"ancestorTitles":["LegacyCodeAnalyzer","Result Structure"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Result Structure should have consistent IDs and timestamps","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should have consistent IDs and timestamps"},{"ancestorTitles":["LegacyCodeAnalyzer","Batch Processing"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Batch Processing should handle mixed file types in a single request","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle mixed file types in a single request"},{"ancestorTitles":["LegacyCodeAnalyzer","Batch Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Batch Processing should maintain analysis type consistency across files","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should maintain analysis type consistency across files"},{"ancestorTitles":["LegacyCodeAnalyzer","Performance Considerations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Performance Considerations should complete analysis within reasonable time limits","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should complete analysis within reasonable time limits"},{"ancestorTitles":["LegacyCodeAnalyzer","Performance Considerations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"LegacyCodeAnalyzer Performance Considerations should handle concurrent analysis requests","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should handle concurrent analysis requests"}],"endTime":1755659267541,"message":"","name":"C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\LegacyCodeAnalyzer.test.ts","startTime":1755659263476,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["FileProcessor","File Processing"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should process a valid COBOL file successfully","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should process a valid COBOL file successfully"},{"ancestorTitles":["FileProcessor","File Processing"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should process a valid Java file successfully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should process a valid Java file successfully"},{"ancestorTitles":["FileProcessor","File Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should process a valid SQL file successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should process a valid SQL file successfully"},{"ancestorTitles":["FileProcessor","File Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should handle files with specified language override","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle files with specified language override"},{"ancestorTitles":["FileProcessor","File Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should reject empty files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject empty files"},{"ancestorTitles":["FileProcessor","File Processing"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Processing should reject oversized files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should reject oversized files"},{"ancestorTitles":["FileProcessor","Base64 File Upload"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Base64 File Upload should handle base64 encoded files","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle base64 encoded files"},{"ancestorTitles":["FileProcessor","Base64 File Upload"],"duration":4,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\FileProcessor.test.ts:109:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"FileProcessor Base64 File Upload should handle invalid base64 gracefully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should handle invalid base64 gracefully"},{"ancestorTitles":["FileProcessor","File Validation Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Validation Edge Cases should handle files with dangerous names","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle files with dangerous names"},{"ancestorTitles":["FileProcessor","File Validation Edge Cases"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Validation Edge Cases should warn about large files but still process them","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should warn about large files but still process them"},{"ancestorTitles":["FileProcessor","File Validation Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor File Validation Edge Cases should detect binary content and reject it","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect binary content and reject it"},{"ancestorTitles":["FileProcessor","Processing Statistics"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Processing Statistics should provide configuration statistics","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should provide configuration statistics"},{"ancestorTitles":["FileProcessor","Language Support"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Language Support should support all expected languages","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should support all expected languages"},{"ancestorTitles":["FileProcessor","Language Support"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Language Support should handle unknown languages gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle unknown languages gracefully"},{"ancestorTitles":["FileProcessor","Error Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Error Handling should handle extremely long filenames","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle extremely long filenames"},{"ancestorTitles":["FileProcessor","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"FileProcessor Error Handling should handle files with null characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle files with null characters"}],"endTime":1755659267559,"message":"  ● FileProcessor › Base64 File Upload › should handle invalid base64 gracefully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 107 |\u001b[39m       )\u001b[33m;\u001b[39m\n     \u001b[90m 108 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 109 |\u001b[39m       expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 110 |\u001b[39m       expect(result\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoContain(\u001b[32m'decode'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 111 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 112 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/FileProcessor.test.ts:109:30)\n","name":"C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\FileProcessor.test.ts","startTime":1755659263476,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["OutputGenerator","Multi-format Output Generation"],"duration":27,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"# Legacy Code Analysis Report\"\nReceived string:    \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"# Legacy Code Analysis Report\"\nReceived string:    \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:86:39)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Multi-format Output Generation should generate multiple output formats","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"failed","title":"should generate multiple output formats"},{"ancestorTitles":["OutputGenerator","Multi-format Output Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Multi-format Output Generation should generate single format outputs","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate single format outputs"},{"ancestorTitles":["OutputGenerator","Multi-format Output Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Multi-format Output Generation should include all analysis data in outputs","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should include all analysis data in outputs"},{"ancestorTitles":["OutputGenerator","HTML Output"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator HTML Output should generate valid HTML structure","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should generate valid HTML structure"},{"ancestorTitles":["OutputGenerator","HTML Output"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"css\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n    </div>······\n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">·············\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>·\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"css\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n    </div>······\n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">·············\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>·\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:148:26)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator HTML Output should include styling and be self-contained","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should include styling and be self-contained"},{"ancestorTitles":["OutputGenerator","HTML Output"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(received).not.toContain(expected) // indexOf\n\nExpected substring: not \"<script>alert(\\\"xss\\\")</script>\"\nReceived string:        \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>\n\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n    </div>\n\n    \n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">\n            \n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>\n        \n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>\n        \n        \n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>\n            \n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax \n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses <script>alert(\\\"xss\\\")</script> patterns</p>\n                <small>Lines 10-15</small>\n            </div>\n            \n        </div>\n        \n        \n        \n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>\n            \n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>\n            \n        </div>\n        \n        \n        \n        \n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 | \n            Functions: 5 | \n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>\n\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"","pass":true}}],"failureMessages":["Error: expect(received).not.toContain(expected) // indexOf\n\nExpected substring: not \"<script>alert(\\\"xss\\\")</script>\"\nReceived string:        \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>\n\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n    </div>\n\n    \n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">\n            \n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>\n        \n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>\n        \n        \n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>\n            \n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax \n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses <script>alert(\\\"xss\\\")</script> patterns</p>\n                <small>Lines 10-15</small>\n            </div>\n            \n        </div>\n        \n        \n        \n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>\n            \n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>\n            \n        </div>\n        \n        \n        \n        \n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 | \n            Functions: 5 | \n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>\n\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:158:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator HTML Output should properly escape HTML content","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should properly escape HTML content"},{"ancestorTitles":["OutputGenerator","Markdown Output"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"# Legacy Code Analysis Report\"\nReceived string:    \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"# Legacy Code Analysis Report\"\nReceived string:    \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:170:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Markdown Output should generate valid Markdown structure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should generate valid Markdown structure"},{"ancestorTitles":["OutputGenerator","Markdown Output"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatch(expected)\n\nExpected pattern: /####\\s+Findings/\nReceived string:  \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"","pass":false}}],"failureMessages":["Error: expect(received).toMatch(expected)\n\nExpected pattern: /####\\s+Findings/\nReceived string:  \"# 🏛️ Legacy Code Analysis Report·\n**Government Code Modernization Assessment**··\nGenerated: 8/19/2025, 8:07:47 PM·\n## 📊 Summary·\n| Metric | Count |\n|--------|-------|\n| Files Analyzed | 1 |\n| Total Findings | 1 |\n| Recommendations | 1 |\n| Analysis Types | 1 |·\n## 📄 payroll.cob (COBOL)·\n### 📊 Documentation·\n**Summary:** COBOL payroll calculation program with employee record processing·\n#### 🔍 Findings (1)·\n- **Deprecated COBOL syntax** (MEDIUM)\n  Uses older COBOL patterns that could be modernized\n  *Lines 10-15*·\n#### 💡 Recommendations (1)·\n- **Update to modern COBOL syntax** (high priority)\n  Replace deprecated constructs with modern equivalents\n  *Effort: medium | Benefits: Improved maintainability, Better readability*·\n**Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n---·\n*Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:182:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Markdown Output should format findings and recommendations properly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should format findings and recommendations properly"},{"ancestorTitles":["OutputGenerator","JSON Output"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeDefined()\n\nReceived: undefined","pass":false}}],"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:201:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator JSON Output should generate valid JSON with proper structure","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"should generate valid JSON with proper structure"},{"ancestorTitles":["OutputGenerator","JSON Output"],"duration":1,"failureDetails":[{"matcherResult":{"expected":1,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: undefined","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: undefined\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:211:47)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator JSON Output should include comprehensive metadata","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should include comprehensive metadata"},{"ancestorTitles":["OutputGenerator","Text Output"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"File: payroll.cob\"\nReceived string:    \"LEGACY CODE ANALYSIS REPORT\nGovernment Code Modernization Assessment\nGenerated: 8/19/2025, 8:07:47 PM\n==================================================·\nSUMMARY\nFiles Analyzed: 1\nTotal Findings: 1\nRecommendations: 1\nAnalysis Types: 1·\nFILE: payroll.cob (COBOL)\n----------------------------------------·\nDOCUMENTATION\nSummary: COBOL payroll calculation program with employee record processing·\nFINDINGS (1):\n1. Deprecated COBOL syntax (MEDIUM)\n   Uses older COBOL patterns that could be modernized\n   Location: Lines 10-15·\nRECOMMENDATIONS (1):\n1. Update to modern COBOL syntax (high priority)\n   Replace deprecated constructs with modern equivalents\n   Effort: medium | Benefits: Improved maintainability, Better readability·\nMetadata: Lines: 150, Functions: 5, Complexity: 12/10··\nGenerated by Help Me Modernize - Government Legacy Code Analysis Tool\n\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"File: payroll.cob\"\nReceived string:    \"LEGACY CODE ANALYSIS REPORT\nGovernment Code Modernization Assessment\nGenerated: 8/19/2025, 8:07:47 PM\n==================================================·\nSUMMARY\nFiles Analyzed: 1\nTotal Findings: 1\nRecommendations: 1\nAnalysis Types: 1·\nFILE: payroll.cob (COBOL)\n----------------------------------------·\nDOCUMENTATION\nSummary: COBOL payroll calculation program with employee record processing·\nFINDINGS (1):\n1. Deprecated COBOL syntax (MEDIUM)\n   Uses older COBOL patterns that could be modernized\n   Location: Lines 10-15·\nRECOMMENDATIONS (1):\n1. Update to modern COBOL syntax (high priority)\n   Replace deprecated constructs with modern equivalents\n   Effort: medium | Benefits: Improved maintainability, Better readability·\nMetadata: Lines: 150, Functions: 5, Complexity: 12/10··\nGenerated by Help Me Modernize - Government Legacy Code Analysis Tool\n\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:226:26)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Text Output should generate readable plain text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should generate readable plain text"},{"ancestorTitles":["OutputGenerator","Text Output"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Text Output should use consistent formatting with separators","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should use consistent formatting with separators"},{"ancestorTitles":["OutputGenerator","PDF Output"],"duration":43,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator PDF Output should generate valid PDF output","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate valid PDF output"},{"ancestorTitles":["OutputGenerator","PDF Output"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator PDF Output should have proper PDF filename","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have proper PDF filename"},{"ancestorTitles":["OutputGenerator","Government Report Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Government Report Generation should generate government-specific reports","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should generate government-specific reports"},{"ancestorTitles":["OutputGenerator","Government Report Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Government Report Generation should include risk assessment","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should include risk assessment"},{"ancestorTitles":["OutputGenerator","Government Report Generation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Government Report Generation should generate appropriate recommended actions","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should generate appropriate recommended actions"},{"ancestorTitles":["OutputGenerator","Government Report Generation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Government Report Generation should include compliance checks","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should include compliance checks"},{"ancestorTitles":["OutputGenerator","Error Handling"],"duration":0,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"No analysis results\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n    </div>·······\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"No analysis results\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">0</div>\n        </div>\n    </div>·······\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:356:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Error Handling should handle empty results gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should handle empty results gracefully"},{"ancestorTitles":["OutputGenerator","Error Handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Error Handling should continue with other formats if one fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should continue with other formats if one fails"},{"ancestorTitles":["OutputGenerator","Error Handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Error Handling should handle malformed analysis results","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle malformed analysis results"},{"ancestorTitles":["OutputGenerator","Multiple Analysis Results"],"duration":1,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"Employee.java\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n    </div>······\n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">·············\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Security Vulnerabilities</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>·\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"Employee.java\"\nReceived string:    \"<!DOCTYPE html>\n<html lang=\\\"en\\\">\n<head>\n    <meta charset=\\\"UTF-8\\\">\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n    <title>Legacy Code Analysis Report</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            line-height: 1.6;\n            color: #333;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n            background-color: #f5f5f5;\n        }\n        .header {\n            background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n            color: white;\n            padding: 30px;\n            border-radius: 10px;\n            margin-bottom: 30px;\n            text-align: center;\n        }\n        .header h1 {\n            margin: 0;\n            font-size: 2.5em;\n        }\n        .header .subtitle {\n            margin: 10px 0 0 0;\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        .summary {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n        .summary-card {\n            background: white;\n            padding: 20px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            text-align: center;\n        }\n        .summary-card h3 {\n            margin: 0 0 10px 0;\n            color: #1e3a8a;\n        }\n        .summary-card .number {\n            font-size: 2em;\n            font-weight: bold;\n            color: #3b82f6;\n        }\n        .file-section {\n            background: white;\n            margin-bottom: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        .file-header {\n            background: #1e3a8a;\n            color: white;\n            padding: 20px;\n            font-size: 1.3em;\n            font-weight: bold;\n        }\n        .file-content {\n            padding: 20px;\n        }\n        .analysis-type {\n            margin-bottom: 25px;\n            border-left: 4px solid #3b82f6;\n            padding-left: 15px;\n        }\n        .analysis-type h3 {\n            color: #1e3a8a;\n            margin: 0 0 15px 0;\n        }\n        .findings, .recommendations {\n            margin-bottom: 20px;\n        }\n        .finding, .recommendation {\n            background: #f8fafc;\n            border: 1px solid #e2e8f0;\n            border-radius: 6px;\n            padding: 15px;\n            margin-bottom: 10px;\n        }\n        .finding.high, .finding.critical {\n            border-left: 4px solid #dc2626;\n        }\n        .finding.medium {\n            border-left: 4px solid #f59e0b;\n        }\n        .finding.low {\n            border-left: 4px solid #10b981;\n        }\n        .finding-title, .rec-title {\n            font-weight: bold;\n            margin-bottom: 8px;\n        }\n        .severity {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n        }\n        .severity.critical { background: #fca5a5; color: #7f1d1d; }\n        .severity.high { background: #fcd34d; color: #78350f; }\n        .severity.medium { background: #fed7aa; color: #9a3412; }\n        .severity.low { background: #86efac; color: #14532d; }\n        .priority {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 0.8em;\n            font-weight: bold;\n            text-transform: uppercase;\n            background: #ddd6fe;\n            color: #5b21b6;\n        }\n        .code-example {\n            background: #1f2937;\n            color: #f9fafb;\n            padding: 15px;\n            border-radius: 6px;\n            margin: 10px 0;\n            overflow-x: auto;\n        }\n        .code-example pre {\n            margin: 0;\n            white-space: pre-wrap;\n        }\n        .metadata {\n            background: #f1f5f9;\n            padding: 15px;\n            border-radius: 6px;\n            margin-top: 20px;\n        }\n        .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding: 20px;\n            color: #6b7280;\n            border-top: 1px solid #e5e7eb;\n        }\n    </style>\n</head>\n<body>\n    <div class=\\\"header\\\">\n        <h1>🏛️ Legacy Code Analysis Report</h1>\n        <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n        <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n    </div>·\n    <div class=\\\"summary\\\">\n        <div class=\\\"summary-card\\\">\n            <h3>Files Analyzed</h3>\n            <div class=\\\"number\\\">1</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Total Findings</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Recommendations</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n        <div class=\\\"summary-card\\\">\n            <h3>Analysis Types</h3>\n            <div class=\\\"number\\\">2</div>\n        </div>\n    </div>······\n    <div class=\\\"file-section\\\">\n        <div class=\\\"file-header\\\">\n            📄 payroll.cob (COBOL)\n        </div>\n        <div class=\\\"file-content\\\">·············\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Documentation</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n    <div class=\\\"analysis-type\\\">\n        <h3>📊 Security Vulnerabilities</h3>·········\n        <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n        <div class=\\\"findings\\\">\n            <h4>🔍 Findings (1)</h4>·············\n            <div class=\\\"finding medium\\\">\n                <div class=\\\"finding-title\\\">\n                    Deprecated COBOL syntax·\n                    <span class=\\\"severity medium\\\">medium</span>\n                </div>\n                <p>Uses older COBOL patterns that could be modernized</p>\n                <small>Lines 10-15</small>\n            </div>·············\n        </div>···························\n        <div class=\\\"recommendations\\\">\n            <h4>💡 Recommendations (1)</h4>·············\n            <div class=\\\"recommendation\\\">\n                <div class=\\\"rec-title\\\">\n                    Update to modern COBOL syntax\n                    <span class=\\\"priority\\\">high priority</span>\n                </div>\n                <p>Replace deprecated constructs with modern equivalents</p>\n                <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n            </div>·············\n        </div>····································\n        <div class=\\\"metadata\\\">\n            <strong>Analysis Metadata:</strong>\n            Lines: 150 |·\n            Functions: 5 |·\n            Complexity: 12/10\n             | Patterns: file-processing, batch-calculation\n        </div>\n    </div>\n        </div>\n    </div>·\n    <div class=\\\"footer\\\">\n        <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n        <p>For questions or support, contact your system administrator</p>\n    </div>\n</body>\n</html>\"\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:419:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Multiple Analysis Results should handle multiple files and analysis types","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should handle multiple files and analysis types"},{"ancestorTitles":["OutputGenerator","Multiple Analysis Results"],"duration":1,"failureDetails":[{"matcherResult":{"actual":1,"expected":5,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 5\nReceived: 1","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 5\nReceived: 1\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts:436:44)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OutputGenerator Multiple Analysis Results should aggregate statistics correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should aggregate statistics correctly"},{"ancestorTitles":["OutputGenerator","Performance"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"OutputGenerator Performance should handle large result sets efficiently","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle large result sets efficiently"}],"endTime":1755659267950,"message":"  ● OutputGenerator › Multi-format Output Generation › should generate multiple output formats\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"# Legacy Code Analysis Report\"\n    Received string:    \"# 🏛️ Legacy Code Analysis Report·\n    **Government Code Modernization Assessment**··\n    Generated: 8/19/2025, 8:07:47 PM·\n    ## 📊 Summary·\n    | Metric | Count |\n    |--------|-------|\n    | Files Analyzed | 1 |\n    | Total Findings | 1 |\n    | Recommendations | 1 |\n    | Analysis Types | 1 |·\n    ## 📄 payroll.cob (COBOL)·\n    ### 📊 Documentation·\n    **Summary:** COBOL payroll calculation program with employee record processing·\n    #### 🔍 Findings (1)·\n    - **Deprecated COBOL syntax** (MEDIUM)\n      Uses older COBOL patterns that could be modernized\n      *Lines 10-15*·\n    #### 💡 Recommendations (1)·\n    - **Update to modern COBOL syntax** (high priority)\n      Replace deprecated constructs with modern equivalents\n      *Effort: medium | Benefits: Improved maintainability, Better readability*·\n    **Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n    ---·\n    *Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n\n    \u001b[0m \u001b[90m 84 |\u001b[39m       expect(htmlOutput\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mmimeType)\u001b[33m.\u001b[39mtoBe(\u001b[32m'text/html'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 85 |\u001b[39m       \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 86 |\u001b[39m       expect(markdownOutput\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mcontent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'# Legacy Code Analysis Report'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 87 |\u001b[39m       expect(markdownOutput\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mmimeType)\u001b[33m.\u001b[39mtoBe(\u001b[32m'text/markdown'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 88 |\u001b[39m       \n     \u001b[90m 89 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(jsonOutput\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mcontent))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:86:39)\n\n  ● OutputGenerator › HTML Output › should include styling and be self-contained\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"css\"\n    Received string:    \"<!DOCTYPE html>\n    <html lang=\\\"en\\\">\n    <head>\n        <meta charset=\\\"UTF-8\\\">\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n        <title>Legacy Code Analysis Report</title>\n        <style>\n            body {\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                line-height: 1.6;\n                color: #333;\n                max-width: 1200px;\n                margin: 0 auto;\n                padding: 20px;\n                background-color: #f5f5f5;\n            }\n            .header {\n                background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n                color: white;\n                padding: 30px;\n                border-radius: 10px;\n                margin-bottom: 30px;\n                text-align: center;\n            }\n            .header h1 {\n                margin: 0;\n                font-size: 2.5em;\n            }\n            .header .subtitle {\n                margin: 10px 0 0 0;\n                font-size: 1.2em;\n                opacity: 0.9;\n            }\n            .summary {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 20px;\n                margin-bottom: 30px;\n            }\n            .summary-card {\n                background: white;\n                padding: 20px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                text-align: center;\n            }\n            .summary-card h3 {\n                margin: 0 0 10px 0;\n                color: #1e3a8a;\n            }\n            .summary-card .number {\n                font-size: 2em;\n                font-weight: bold;\n                color: #3b82f6;\n            }\n            .file-section {\n                background: white;\n                margin-bottom: 30px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                overflow: hidden;\n            }\n            .file-header {\n                background: #1e3a8a;\n                color: white;\n                padding: 20px;\n                font-size: 1.3em;\n                font-weight: bold;\n            }\n            .file-content {\n                padding: 20px;\n            }\n            .analysis-type {\n                margin-bottom: 25px;\n                border-left: 4px solid #3b82f6;\n                padding-left: 15px;\n            }\n            .analysis-type h3 {\n                color: #1e3a8a;\n                margin: 0 0 15px 0;\n            }\n            .findings, .recommendations {\n                margin-bottom: 20px;\n            }\n            .finding, .recommendation {\n                background: #f8fafc;\n                border: 1px solid #e2e8f0;\n                border-radius: 6px;\n                padding: 15px;\n                margin-bottom: 10px;\n            }\n            .finding.high, .finding.critical {\n                border-left: 4px solid #dc2626;\n            }\n            .finding.medium {\n                border-left: 4px solid #f59e0b;\n            }\n            .finding.low {\n                border-left: 4px solid #10b981;\n            }\n            .finding-title, .rec-title {\n                font-weight: bold;\n                margin-bottom: 8px;\n            }\n            .severity {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n            }\n            .severity.critical { background: #fca5a5; color: #7f1d1d; }\n            .severity.high { background: #fcd34d; color: #78350f; }\n            .severity.medium { background: #fed7aa; color: #9a3412; }\n            .severity.low { background: #86efac; color: #14532d; }\n            .priority {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n                background: #ddd6fe;\n                color: #5b21b6;\n            }\n            .code-example {\n                background: #1f2937;\n                color: #f9fafb;\n                padding: 15px;\n                border-radius: 6px;\n                margin: 10px 0;\n                overflow-x: auto;\n            }\n            .code-example pre {\n                margin: 0;\n                white-space: pre-wrap;\n            }\n            .metadata {\n                background: #f1f5f9;\n                padding: 15px;\n                border-radius: 6px;\n                margin-top: 20px;\n            }\n            .footer {\n                text-align: center;\n                margin-top: 40px;\n                padding: 20px;\n                color: #6b7280;\n                border-top: 1px solid #e5e7eb;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\\\"header\\\">\n            <h1>🏛️ Legacy Code Analysis Report</h1>\n            <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n            <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n        </div>·\n        <div class=\\\"summary\\\">\n            <div class=\\\"summary-card\\\">\n                <h3>Files Analyzed</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Total Findings</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Recommendations</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Analysis Types</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n        </div>······\n        <div class=\\\"file-section\\\">\n            <div class=\\\"file-header\\\">\n                📄 payroll.cob (COBOL)\n            </div>\n            <div class=\\\"file-content\\\">·············\n        <div class=\\\"analysis-type\\\">\n            <h3>📊 Documentation</h3>·········\n            <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n            <div class=\\\"findings\\\">\n                <h4>🔍 Findings (1)</h4>·············\n                <div class=\\\"finding medium\\\">\n                    <div class=\\\"finding-title\\\">\n                        Deprecated COBOL syntax·\n                        <span class=\\\"severity medium\\\">medium</span>\n                    </div>\n                    <p>Uses older COBOL patterns that could be modernized</p>\n                    <small>Lines 10-15</small>\n                </div>·············\n            </div>···························\n            <div class=\\\"recommendations\\\">\n                <h4>💡 Recommendations (1)</h4>·············\n                <div class=\\\"recommendation\\\">\n                    <div class=\\\"rec-title\\\">\n                        Update to modern COBOL syntax\n                        <span class=\\\"priority\\\">high priority</span>\n                    </div>\n                    <p>Replace deprecated constructs with modern equivalents</p>\n                    <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n                </div>·············\n            </div>····································\n            <div class=\\\"metadata\\\">\n                <strong>Analysis Metadata:</strong>\n                Lines: 150 |·\n                Functions: 5 |·\n                Complexity: 12/10\n                 | Patterns: file-processing, batch-calculation\n            </div>\n        </div>\n            </div>\n        </div>·\n        <div class=\\\"footer\\\">\n            <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n            <p>For questions or support, contact your system administrator</p>\n        </div>\n    </body>\n    </html>\"\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m       expect(htmlOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'<style>'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 147 |\u001b[39m       expect(htmlOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'font-family'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       expect(htmlOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'css'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     it(\u001b[32m'should properly escape HTML content'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:148:26)\n\n  ● OutputGenerator › HTML Output › should properly escape HTML content\n\n    expect(received).not.toContain(expected) // indexOf\n\n    Expected substring: not \"<script>alert(\\\"xss\\\")</script>\"\n    Received string:        \"<!DOCTYPE html>\n    <html lang=\\\"en\\\">\n    <head>\n        <meta charset=\\\"UTF-8\\\">\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n        <title>Legacy Code Analysis Report</title>\n        <style>\n            body {\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                line-height: 1.6;\n                color: #333;\n                max-width: 1200px;\n                margin: 0 auto;\n                padding: 20px;\n                background-color: #f5f5f5;\n            }\n            .header {\n                background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n                color: white;\n                padding: 30px;\n                border-radius: 10px;\n                margin-bottom: 30px;\n                text-align: center;\n            }\n            .header h1 {\n                margin: 0;\n                font-size: 2.5em;\n            }\n            .header .subtitle {\n                margin: 10px 0 0 0;\n                font-size: 1.2em;\n                opacity: 0.9;\n            }\n            .summary {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 20px;\n                margin-bottom: 30px;\n            }\n            .summary-card {\n                background: white;\n                padding: 20px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                text-align: center;\n            }\n            .summary-card h3 {\n                margin: 0 0 10px 0;\n                color: #1e3a8a;\n            }\n            .summary-card .number {\n                font-size: 2em;\n                font-weight: bold;\n                color: #3b82f6;\n            }\n            .file-section {\n                background: white;\n                margin-bottom: 30px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                overflow: hidden;\n            }\n            .file-header {\n                background: #1e3a8a;\n                color: white;\n                padding: 20px;\n                font-size: 1.3em;\n                font-weight: bold;\n            }\n            .file-content {\n                padding: 20px;\n            }\n            .analysis-type {\n                margin-bottom: 25px;\n                border-left: 4px solid #3b82f6;\n                padding-left: 15px;\n            }\n            .analysis-type h3 {\n                color: #1e3a8a;\n                margin: 0 0 15px 0;\n            }\n            .findings, .recommendations {\n                margin-bottom: 20px;\n            }\n            .finding, .recommendation {\n                background: #f8fafc;\n                border: 1px solid #e2e8f0;\n                border-radius: 6px;\n                padding: 15px;\n                margin-bottom: 10px;\n            }\n            .finding.high, .finding.critical {\n                border-left: 4px solid #dc2626;\n            }\n            .finding.medium {\n                border-left: 4px solid #f59e0b;\n            }\n            .finding.low {\n                border-left: 4px solid #10b981;\n            }\n            .finding-title, .rec-title {\n                font-weight: bold;\n                margin-bottom: 8px;\n            }\n            .severity {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n            }\n            .severity.critical { background: #fca5a5; color: #7f1d1d; }\n            .severity.high { background: #fcd34d; color: #78350f; }\n            .severity.medium { background: #fed7aa; color: #9a3412; }\n            .severity.low { background: #86efac; color: #14532d; }\n            .priority {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n                background: #ddd6fe;\n                color: #5b21b6;\n            }\n            .code-example {\n                background: #1f2937;\n                color: #f9fafb;\n                padding: 15px;\n                border-radius: 6px;\n                margin: 10px 0;\n                overflow-x: auto;\n            }\n            .code-example pre {\n                margin: 0;\n                white-space: pre-wrap;\n            }\n            .metadata {\n                background: #f1f5f9;\n                padding: 15px;\n                border-radius: 6px;\n                margin-top: 20px;\n            }\n            .footer {\n                text-align: center;\n                margin-top: 40px;\n                padding: 20px;\n                color: #6b7280;\n                border-top: 1px solid #e5e7eb;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\\\"header\\\">\n            <h1>🏛️ Legacy Code Analysis Report</h1>\n            <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n            <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n        </div>\n\n        <div class=\\\"summary\\\">\n            <div class=\\\"summary-card\\\">\n                <h3>Files Analyzed</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Total Findings</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Recommendations</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Analysis Types</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n        </div>\n\n        \n        <div class=\\\"file-section\\\">\n            <div class=\\\"file-header\\\">\n                📄 payroll.cob (COBOL)\n            </div>\n            <div class=\\\"file-content\\\">\n                \n        <div class=\\\"analysis-type\\\">\n            <h3>📊 Documentation</h3>\n            \n            <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>\n            \n            \n            <div class=\\\"findings\\\">\n                <h4>🔍 Findings (1)</h4>\n                \n                <div class=\\\"finding medium\\\">\n                    <div class=\\\"finding-title\\\">\n                        Deprecated COBOL syntax \n                        <span class=\\\"severity medium\\\">medium</span>\n                    </div>\n                    <p>Uses <script>alert(\\\"xss\\\")</script> patterns</p>\n                    <small>Lines 10-15</small>\n                </div>\n                \n            </div>\n            \n            \n            \n            <div class=\\\"recommendations\\\">\n                <h4>💡 Recommendations (1)</h4>\n                \n                <div class=\\\"recommendation\\\">\n                    <div class=\\\"rec-title\\\">\n                        Update to modern COBOL syntax\n                        <span class=\\\"priority\\\">high priority</span>\n                    </div>\n                    <p>Replace deprecated constructs with modern equivalents</p>\n                    <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n                </div>\n                \n            </div>\n            \n            \n            \n            \n            <div class=\\\"metadata\\\">\n                <strong>Analysis Metadata:</strong>\n                Lines: 150 | \n                Functions: 5 | \n                Complexity: 12/10\n                 | Patterns: file-processing, batch-calculation\n            </div>\n        </div>\n            </div>\n        </div>\n\n        <div class=\\\"footer\\\">\n            <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n            <p>For questions or support, contact your system administrator</p>\n        </div>\n    </body>\n    </html>\"\n\n    \u001b[0m \u001b[90m 156 |\u001b[39m       \u001b[36mconst\u001b[39m htmlOutput \u001b[33m=\u001b[39m outputs[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcontent\u001b[33m;\u001b[39m\n     \u001b[90m 157 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 158 |\u001b[39m       expect(htmlOutput)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'<script>alert(\"xss\")</script>'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 159 |\u001b[39m       expect(htmlOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'&lt;script&gt;'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 160 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 161 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:158:30)\n\n  ● OutputGenerator › Markdown Output › should generate valid Markdown structure\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"# Legacy Code Analysis Report\"\n    Received string:    \"# 🏛️ Legacy Code Analysis Report·\n    **Government Code Modernization Assessment**··\n    Generated: 8/19/2025, 8:07:47 PM·\n    ## 📊 Summary·\n    | Metric | Count |\n    |--------|-------|\n    | Files Analyzed | 1 |\n    | Total Findings | 1 |\n    | Recommendations | 1 |\n    | Analysis Types | 1 |·\n    ## 📄 payroll.cob (COBOL)·\n    ### 📊 Documentation·\n    **Summary:** COBOL payroll calculation program with employee record processing·\n    #### 🔍 Findings (1)·\n    - **Deprecated COBOL syntax** (MEDIUM)\n      Uses older COBOL patterns that could be modernized\n      *Lines 10-15*·\n    #### 💡 Recommendations (1)·\n    - **Update to modern COBOL syntax** (high priority)\n      Replace deprecated constructs with modern equivalents\n      *Effort: medium | Benefits: Improved maintainability, Better readability*·\n    **Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n    ---·\n    *Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n\n    \u001b[0m \u001b[90m 168 |\u001b[39m       \u001b[36mconst\u001b[39m markdownOutput \u001b[33m=\u001b[39m outputs[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcontent\u001b[33m;\u001b[39m\n     \u001b[90m 169 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 170 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'# Legacy Code Analysis Report'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 171 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'## Analysis Results'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'### payroll.cob'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 173 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'**Language:** COBOL'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:170:30)\n\n  ● OutputGenerator › Markdown Output › should format findings and recommendations properly\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /####\\s+Findings/\n    Received string:  \"# 🏛️ Legacy Code Analysis Report·\n    **Government Code Modernization Assessment**··\n    Generated: 8/19/2025, 8:07:47 PM·\n    ## 📊 Summary·\n    | Metric | Count |\n    |--------|-------|\n    | Files Analyzed | 1 |\n    | Total Findings | 1 |\n    | Recommendations | 1 |\n    | Analysis Types | 1 |·\n    ## 📄 payroll.cob (COBOL)·\n    ### 📊 Documentation·\n    **Summary:** COBOL payroll calculation program with employee record processing·\n    #### 🔍 Findings (1)·\n    - **Deprecated COBOL syntax** (MEDIUM)\n      Uses older COBOL patterns that could be modernized\n      *Lines 10-15*·\n    #### 💡 Recommendations (1)·\n    - **Update to modern COBOL syntax** (high priority)\n      Replace deprecated constructs with modern equivalents\n      *Effort: medium | Benefits: Improved maintainability, Better readability*·\n    **Analysis Metadata:** Lines: 150 | Functions: 5 | Complexity: 12/10 | Patterns: file-processing, batch-calculation··\n    ---·\n    *Generated by Help Me Modernize - Government Legacy Code Analysis Tool*\"\n\n    \u001b[0m \u001b[90m 180 |\u001b[39m       \u001b[36mconst\u001b[39m markdownOutput \u001b[33m=\u001b[39m outputs[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcontent\u001b[33m;\u001b[39m\n     \u001b[90m 181 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 182 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/####\\s+Findings/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 183 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/####\\s+Recommendations/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 184 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'- **Deprecated COBOL syntax**'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 185 |\u001b[39m       expect(markdownOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'- **Update to modern COBOL syntax**'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:182:30)\n\n  ● OutputGenerator › JSON Output › should generate valid JSON with proper structure\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 199 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mmetadata)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mresults)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 201 |\u001b[39m       expect(parsed\u001b[33m.\u001b[39mgeneratedAt)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 202 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 203 |\u001b[39m\n     \u001b[90m 204 |\u001b[39m     it(\u001b[32m'should include comprehensive metadata'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:201:34)\n\n  ● OutputGenerator › JSON Output › should include comprehensive metadata\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 1\n    Received: undefined\n\n    \u001b[0m \u001b[90m 209 |\u001b[39m\n     \u001b[90m 210 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalFiles)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 211 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalFindings)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 212 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalRecommendations)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 213 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mlanguages)\u001b[33m.\u001b[39mtoContain(\u001b[32m'cobol'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39manalysisTypes)\u001b[33m.\u001b[39mtoContain(\u001b[32m'documentation'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:211:47)\n\n  ● OutputGenerator › Text Output › should generate readable plain text\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"File: payroll.cob\"\n    Received string:    \"LEGACY CODE ANALYSIS REPORT\n    Government Code Modernization Assessment\n    Generated: 8/19/2025, 8:07:47 PM\n    ==================================================·\n    SUMMARY\n    Files Analyzed: 1\n    Total Findings: 1\n    Recommendations: 1\n    Analysis Types: 1·\n    FILE: payroll.cob (COBOL)\n    ----------------------------------------·\n    DOCUMENTATION\n    Summary: COBOL payroll calculation program with employee record processing·\n    FINDINGS (1):\n    1. Deprecated COBOL syntax (MEDIUM)\n       Uses older COBOL patterns that could be modernized\n       Location: Lines 10-15·\n    RECOMMENDATIONS (1):\n    1. Update to modern COBOL syntax (high priority)\n       Replace deprecated constructs with modern equivalents\n       Effort: medium | Benefits: Improved maintainability, Better readability·\n    Metadata: Lines: 150, Functions: 5, Complexity: 12/10··\n    Generated by Help Me Modernize - Government Legacy Code Analysis Tool\n    \"\n\n    \u001b[0m \u001b[90m 224 |\u001b[39m\n     \u001b[90m 225 |\u001b[39m       expect(textOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'LEGACY CODE ANALYSIS REPORT'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 226 |\u001b[39m       expect(textOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'File: payroll.cob'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 227 |\u001b[39m       expect(textOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Language: COBOL'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 228 |\u001b[39m       expect(textOutput)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Deprecated COBOL syntax'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m       \u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:226:26)\n\n  ● OutputGenerator › Error Handling › should handle empty results gracefully\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"No analysis results\"\n    Received string:    \"<!DOCTYPE html>\n    <html lang=\\\"en\\\">\n    <head>\n        <meta charset=\\\"UTF-8\\\">\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n        <title>Legacy Code Analysis Report</title>\n        <style>\n            body {\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                line-height: 1.6;\n                color: #333;\n                max-width: 1200px;\n                margin: 0 auto;\n                padding: 20px;\n                background-color: #f5f5f5;\n            }\n            .header {\n                background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n                color: white;\n                padding: 30px;\n                border-radius: 10px;\n                margin-bottom: 30px;\n                text-align: center;\n            }\n            .header h1 {\n                margin: 0;\n                font-size: 2.5em;\n            }\n            .header .subtitle {\n                margin: 10px 0 0 0;\n                font-size: 1.2em;\n                opacity: 0.9;\n            }\n            .summary {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 20px;\n                margin-bottom: 30px;\n            }\n            .summary-card {\n                background: white;\n                padding: 20px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                text-align: center;\n            }\n            .summary-card h3 {\n                margin: 0 0 10px 0;\n                color: #1e3a8a;\n            }\n            .summary-card .number {\n                font-size: 2em;\n                font-weight: bold;\n                color: #3b82f6;\n            }\n            .file-section {\n                background: white;\n                margin-bottom: 30px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                overflow: hidden;\n            }\n            .file-header {\n                background: #1e3a8a;\n                color: white;\n                padding: 20px;\n                font-size: 1.3em;\n                font-weight: bold;\n            }\n            .file-content {\n                padding: 20px;\n            }\n            .analysis-type {\n                margin-bottom: 25px;\n                border-left: 4px solid #3b82f6;\n                padding-left: 15px;\n            }\n            .analysis-type h3 {\n                color: #1e3a8a;\n                margin: 0 0 15px 0;\n            }\n            .findings, .recommendations {\n                margin-bottom: 20px;\n            }\n            .finding, .recommendation {\n                background: #f8fafc;\n                border: 1px solid #e2e8f0;\n                border-radius: 6px;\n                padding: 15px;\n                margin-bottom: 10px;\n            }\n            .finding.high, .finding.critical {\n                border-left: 4px solid #dc2626;\n            }\n            .finding.medium {\n                border-left: 4px solid #f59e0b;\n            }\n            .finding.low {\n                border-left: 4px solid #10b981;\n            }\n            .finding-title, .rec-title {\n                font-weight: bold;\n                margin-bottom: 8px;\n            }\n            .severity {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n            }\n            .severity.critical { background: #fca5a5; color: #7f1d1d; }\n            .severity.high { background: #fcd34d; color: #78350f; }\n            .severity.medium { background: #fed7aa; color: #9a3412; }\n            .severity.low { background: #86efac; color: #14532d; }\n            .priority {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n                background: #ddd6fe;\n                color: #5b21b6;\n            }\n            .code-example {\n                background: #1f2937;\n                color: #f9fafb;\n                padding: 15px;\n                border-radius: 6px;\n                margin: 10px 0;\n                overflow-x: auto;\n            }\n            .code-example pre {\n                margin: 0;\n                white-space: pre-wrap;\n            }\n            .metadata {\n                background: #f1f5f9;\n                padding: 15px;\n                border-radius: 6px;\n                margin-top: 20px;\n            }\n            .footer {\n                text-align: center;\n                margin-top: 40px;\n                padding: 20px;\n                color: #6b7280;\n                border-top: 1px solid #e5e7eb;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\\\"header\\\">\n            <h1>🏛️ Legacy Code Analysis Report</h1>\n            <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n            <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n        </div>·\n        <div class=\\\"summary\\\">\n            <div class=\\\"summary-card\\\">\n                <h3>Files Analyzed</h3>\n                <div class=\\\"number\\\">0</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Total Findings</h3>\n                <div class=\\\"number\\\">0</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Recommendations</h3>\n                <div class=\\\"number\\\">0</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Analysis Types</h3>\n                <div class=\\\"number\\\">0</div>\n            </div>\n        </div>·······\n        <div class=\\\"footer\\\">\n            <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n            <p>For questions or support, contact your system administrator</p>\n        </div>\n    </body>\n    </html>\"\n\n    \u001b[0m \u001b[90m 354 |\u001b[39m       \u001b[36mconst\u001b[39m jsonOutput \u001b[33m=\u001b[39m outputs\u001b[33m.\u001b[39mfind(o \u001b[33m=>\u001b[39m o\u001b[33m.\u001b[39mformat \u001b[33m===\u001b[39m \u001b[32m'json'\u001b[39m)\u001b[33m!\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 355 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 356 |\u001b[39m       expect(htmlOutput\u001b[33m.\u001b[39mcontent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'No analysis results'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 357 |\u001b[39m       \n     \u001b[90m 358 |\u001b[39m       \u001b[36mconst\u001b[39m jsonData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(jsonOutput\u001b[33m.\u001b[39mcontent)\u001b[33m;\u001b[39m\n     \u001b[90m 359 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mresults)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:356:34)\n\n  ● OutputGenerator › Multiple Analysis Results › should handle multiple files and analysis types\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"Employee.java\"\n    Received string:    \"<!DOCTYPE html>\n    <html lang=\\\"en\\\">\n    <head>\n        <meta charset=\\\"UTF-8\\\">\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\n        <title>Legacy Code Analysis Report</title>\n        <style>\n            body {\n                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n                line-height: 1.6;\n                color: #333;\n                max-width: 1200px;\n                margin: 0 auto;\n                padding: 20px;\n                background-color: #f5f5f5;\n            }\n            .header {\n                background: linear-gradient(135deg, #1e3a8a, #3b82f6);\n                color: white;\n                padding: 30px;\n                border-radius: 10px;\n                margin-bottom: 30px;\n                text-align: center;\n            }\n            .header h1 {\n                margin: 0;\n                font-size: 2.5em;\n            }\n            .header .subtitle {\n                margin: 10px 0 0 0;\n                font-size: 1.2em;\n                opacity: 0.9;\n            }\n            .summary {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n                gap: 20px;\n                margin-bottom: 30px;\n            }\n            .summary-card {\n                background: white;\n                padding: 20px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                text-align: center;\n            }\n            .summary-card h3 {\n                margin: 0 0 10px 0;\n                color: #1e3a8a;\n            }\n            .summary-card .number {\n                font-size: 2em;\n                font-weight: bold;\n                color: #3b82f6;\n            }\n            .file-section {\n                background: white;\n                margin-bottom: 30px;\n                border-radius: 8px;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                overflow: hidden;\n            }\n            .file-header {\n                background: #1e3a8a;\n                color: white;\n                padding: 20px;\n                font-size: 1.3em;\n                font-weight: bold;\n            }\n            .file-content {\n                padding: 20px;\n            }\n            .analysis-type {\n                margin-bottom: 25px;\n                border-left: 4px solid #3b82f6;\n                padding-left: 15px;\n            }\n            .analysis-type h3 {\n                color: #1e3a8a;\n                margin: 0 0 15px 0;\n            }\n            .findings, .recommendations {\n                margin-bottom: 20px;\n            }\n            .finding, .recommendation {\n                background: #f8fafc;\n                border: 1px solid #e2e8f0;\n                border-radius: 6px;\n                padding: 15px;\n                margin-bottom: 10px;\n            }\n            .finding.high, .finding.critical {\n                border-left: 4px solid #dc2626;\n            }\n            .finding.medium {\n                border-left: 4px solid #f59e0b;\n            }\n            .finding.low {\n                border-left: 4px solid #10b981;\n            }\n            .finding-title, .rec-title {\n                font-weight: bold;\n                margin-bottom: 8px;\n            }\n            .severity {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n            }\n            .severity.critical { background: #fca5a5; color: #7f1d1d; }\n            .severity.high { background: #fcd34d; color: #78350f; }\n            .severity.medium { background: #fed7aa; color: #9a3412; }\n            .severity.low { background: #86efac; color: #14532d; }\n            .priority {\n                display: inline-block;\n                padding: 2px 8px;\n                border-radius: 4px;\n                font-size: 0.8em;\n                font-weight: bold;\n                text-transform: uppercase;\n                background: #ddd6fe;\n                color: #5b21b6;\n            }\n            .code-example {\n                background: #1f2937;\n                color: #f9fafb;\n                padding: 15px;\n                border-radius: 6px;\n                margin: 10px 0;\n                overflow-x: auto;\n            }\n            .code-example pre {\n                margin: 0;\n                white-space: pre-wrap;\n            }\n            .metadata {\n                background: #f1f5f9;\n                padding: 15px;\n                border-radius: 6px;\n                margin-top: 20px;\n            }\n            .footer {\n                text-align: center;\n                margin-top: 40px;\n                padding: 20px;\n                color: #6b7280;\n                border-top: 1px solid #e5e7eb;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\\\"header\\\">\n            <h1>🏛️ Legacy Code Analysis Report</h1>\n            <div class=\\\"subtitle\\\">Government Code Modernization Assessment</div>\n            <div class=\\\"subtitle\\\">Generated: 8/19/2025, 8:07:47 PM</div>\n        </div>·\n        <div class=\\\"summary\\\">\n            <div class=\\\"summary-card\\\">\n                <h3>Files Analyzed</h3>\n                <div class=\\\"number\\\">1</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Total Findings</h3>\n                <div class=\\\"number\\\">2</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Recommendations</h3>\n                <div class=\\\"number\\\">2</div>\n            </div>\n            <div class=\\\"summary-card\\\">\n                <h3>Analysis Types</h3>\n                <div class=\\\"number\\\">2</div>\n            </div>\n        </div>······\n        <div class=\\\"file-section\\\">\n            <div class=\\\"file-header\\\">\n                📄 payroll.cob (COBOL)\n            </div>\n            <div class=\\\"file-content\\\">·············\n        <div class=\\\"analysis-type\\\">\n            <h3>📊 Documentation</h3>·········\n            <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n            <div class=\\\"findings\\\">\n                <h4>🔍 Findings (1)</h4>·············\n                <div class=\\\"finding medium\\\">\n                    <div class=\\\"finding-title\\\">\n                        Deprecated COBOL syntax·\n                        <span class=\\\"severity medium\\\">medium</span>\n                    </div>\n                    <p>Uses older COBOL patterns that could be modernized</p>\n                    <small>Lines 10-15</small>\n                </div>·············\n            </div>···························\n            <div class=\\\"recommendations\\\">\n                <h4>💡 Recommendations (1)</h4>·············\n                <div class=\\\"recommendation\\\">\n                    <div class=\\\"rec-title\\\">\n                        Update to modern COBOL syntax\n                        <span class=\\\"priority\\\">high priority</span>\n                    </div>\n                    <p>Replace deprecated constructs with modern equivalents</p>\n                    <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n                </div>·············\n            </div>····································\n            <div class=\\\"metadata\\\">\n                <strong>Analysis Metadata:</strong>\n                Lines: 150 |·\n                Functions: 5 |·\n                Complexity: 12/10\n                 | Patterns: file-processing, batch-calculation\n            </div>\n        </div>\n        <div class=\\\"analysis-type\\\">\n            <h3>📊 Security Vulnerabilities</h3>·········\n            <p><strong>Summary:</strong> COBOL payroll calculation program with employee record processing</p>··················\n            <div class=\\\"findings\\\">\n                <h4>🔍 Findings (1)</h4>·············\n                <div class=\\\"finding medium\\\">\n                    <div class=\\\"finding-title\\\">\n                        Deprecated COBOL syntax·\n                        <span class=\\\"severity medium\\\">medium</span>\n                    </div>\n                    <p>Uses older COBOL patterns that could be modernized</p>\n                    <small>Lines 10-15</small>\n                </div>·············\n            </div>···························\n            <div class=\\\"recommendations\\\">\n                <h4>💡 Recommendations (1)</h4>·············\n                <div class=\\\"recommendation\\\">\n                    <div class=\\\"rec-title\\\">\n                        Update to modern COBOL syntax\n                        <span class=\\\"priority\\\">high priority</span>\n                    </div>\n                    <p>Replace deprecated constructs with modern equivalents</p>\n                    <p><strong>Effort:</strong> medium | <strong>Benefits:</strong> Improved maintainability, Better readability</p>\n                </div>·············\n            </div>····································\n            <div class=\\\"metadata\\\">\n                <strong>Analysis Metadata:</strong>\n                Lines: 150 |·\n                Functions: 5 |·\n                Complexity: 12/10\n                 | Patterns: file-processing, batch-calculation\n            </div>\n        </div>\n            </div>\n        </div>·\n        <div class=\\\"footer\\\">\n            <p>Generated by Help Me Modernize - Government Legacy Code Analysis Tool</p>\n            <p>For questions or support, contact your system administrator</p>\n        </div>\n    </body>\n    </html>\"\n\n    \u001b[0m \u001b[90m 417 |\u001b[39m       \u001b[36mconst\u001b[39m htmlOutput \u001b[33m=\u001b[39m outputs\u001b[33m.\u001b[39mfind(o \u001b[33m=>\u001b[39m o\u001b[33m.\u001b[39mformat \u001b[33m===\u001b[39m \u001b[32m'html'\u001b[39m)\u001b[33m!\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 418 |\u001b[39m       expect(htmlOutput\u001b[33m.\u001b[39mcontent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'payroll.cob'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 419 |\u001b[39m       expect(htmlOutput\u001b[33m.\u001b[39mcontent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Employee.java'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 420 |\u001b[39m\n     \u001b[90m 421 |\u001b[39m       \u001b[36mconst\u001b[39m jsonData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(outputs\u001b[33m.\u001b[39mfind(o \u001b[33m=>\u001b[39m o\u001b[33m.\u001b[39mformat \u001b[33m===\u001b[39m \u001b[32m'json'\u001b[39m)\u001b[33m!\u001b[39m\u001b[33m.\u001b[39mcontent)\u001b[33m;\u001b[39m\n     \u001b[90m 422 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mresults)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:419:34)\n\n  ● OutputGenerator › Multiple Analysis Results › should aggregate statistics correctly\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 1\n\n    \u001b[0m \u001b[90m 434 |\u001b[39m       \u001b[36mconst\u001b[39m jsonData \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mparse(outputs[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mcontent)\u001b[33m;\u001b[39m\n     \u001b[90m 435 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 436 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalFiles)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 437 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalFindings)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 1 finding per result\u001b[39m\n     \u001b[90m 438 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mmetadata\u001b[33m.\u001b[39mtotalRecommendations)\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 1 recommendation per result\u001b[39m\n     \u001b[90m 439 |\u001b[39m       expect(jsonData\u001b[33m.\u001b[39mresults)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/unit/OutputGenerator.test.ts:436:44)\n","name":"C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\unit\\OutputGenerator.test.ts","startTime":1755659263476,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["MCP Server Integration","End-to-End Workflow"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration End-to-End Workflow should process a complete analysis workflow","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should process a complete analysis workflow"},{"ancestorTitles":["MCP Server Integration","End-to-End Workflow"],"duration":3,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveLength(expected)\n\nExpected length: 4\nReceived length: 2\nReceived array:  [{\"analysisType\": \"documentation\", \"fileId\": \"0a373b47-2953-4498-ba73-3abbafef5548\", \"fileName\": \"payroll.cob\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-0a373b47-2953-4498-ba73-3abbafef5548-1755659268219\", \"language\": \"cobol\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}, {\"analysisType\": \"documentation\", \"fileId\": \"c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0\", \"fileName\": \"Employee.java\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0-1755659268219\", \"language\": \"java\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}]","pass":false}}],"failureMessages":["Error: expect(received).toHaveLength(expected)\n\nExpected length: 4\nReceived length: 2\nReceived array:  [{\"analysisType\": \"documentation\", \"fileId\": \"0a373b47-2953-4498-ba73-3abbafef5548\", \"fileName\": \"payroll.cob\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-0a373b47-2953-4498-ba73-3abbafef5548-1755659268219\", \"language\": \"cobol\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}, {\"analysisType\": \"documentation\", \"fileId\": \"c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0\", \"fileName\": \"Employee.java\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0-1755659268219\", \"language\": \"java\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}]\n    at Object.<anonymous> (C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\integration\\mcpWorkflow.test.ts:103:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"MCP Server Integration End-to-End Workflow should handle multiple files and analysis types","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should handle multiple files and analysis types"},{"ancestorTitles":["MCP Server Integration","Error Handling Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Error Handling Integration should handle file processing failures gracefully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle file processing failures gracefully"},{"ancestorTitles":["MCP Server Integration","Error Handling Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Error Handling Integration should handle analysis failures without crashing","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle analysis failures without crashing"},{"ancestorTitles":["MCP Server Integration","Component Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Component Integration should maintain data consistency across components","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"should maintain data consistency across components"},{"ancestorTitles":["MCP Server Integration","Component Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Component Integration should handle configuration consistency","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should handle configuration consistency"},{"ancestorTitles":["MCP Server Integration","Performance Integration"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Performance Integration should handle moderate load efficiently","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle moderate load efficiently"},{"ancestorTitles":["MCP Server Integration","Output Format Integration"],"duration":41,"failureDetails":[],"failureMessages":[],"fullName":"MCP Server Integration Output Format Integration should generate consistent information across all formats","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should generate consistent information across all formats"}],"endTime":1755659268280,"message":"  ● MCP Server Integration › End-to-End Workflow › should handle multiple files and analysis types\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 4\n    Received length: 2\n    Received array:  [{\"analysisType\": \"documentation\", \"fileId\": \"0a373b47-2953-4498-ba73-3abbafef5548\", \"fileName\": \"payroll.cob\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-0a373b47-2953-4498-ba73-3abbafef5548-1755659268219\", \"language\": \"cobol\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}, {\"analysisType\": \"documentation\", \"fileId\": \"c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0\", \"fileName\": \"Employee.java\", \"generatedAt\": 2025-08-20T03:07:48.219Z, \"id\": \"error-c5a8c22f-bde2-4fb9-b275-45ab5b2c22a0-1755659268219\", \"language\": \"java\", \"processingTime\": 0, \"results\": {\"findings\": [{\"description\": \"AI analysis failed: Cannot read properties of undefined (reading 'content')\", \"id\": \"error-1755659268219\", \"location\": {\"endLine\": 1, \"startLine\": 1}, \"severity\": \"high\", \"title\": \"Analysis Error\", \"type\": \"error\"}], \"metadata\": {\"complexity\": 0, \"functionsFound\": 0, \"linesAnalyzed\": 0, \"patterns\": [\"error\"]}, \"recommendations\": [{\"benefits\": [\"Successful analysis\"], \"description\": \"Check system configuration and try again.\", \"effort\": \"low\", \"id\": \"error-rec-1755659268219\", \"priority\": \"high\", \"title\": \"Resolve Analysis Error\", \"type\": \"error-resolution\"}], \"riskLevel\": \"high\", \"summary\": \"Analysis failed: AI analysis failed: Cannot read properties of undefined (reading 'content')\"}}]\n\n    \u001b[0m \u001b[90m 101 |\u001b[39m\n     \u001b[90m 102 |\u001b[39m       \u001b[90m// Should have 4 results: 2 files × 2 analysis types\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 103 |\u001b[39m       expect(analysisResults)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m4\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 104 |\u001b[39m\n     \u001b[90m 105 |\u001b[39m       \u001b[90m// Generate comprehensive output\u001b[39m\n     \u001b[90m 106 |\u001b[39m       \u001b[36mconst\u001b[39m outputs \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m outputGenerator\u001b[33m.\u001b[39mgenerateOutputs(analysisResults\u001b[33m,\u001b[39m [\u001b[32m'html'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'json'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'markdown'\u001b[39m])\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (tests/integration/mcpWorkflow.test.ts:103:31)\n","name":"C:\\Users\\calli\\OneDrive\\Desktop\\CodeStuff\\LegacyCodeLLM\\tests\\integration\\mcpWorkflow.test.ts","startTime":1755659263460,"status":"failed","summary":""}],"wasInterrupted":false}
